/* styles.css
   Minimal, compact UI for Word Circle Game
   — Uses theme vars set by applyTheme(theme)
   — Works for both Welcome and Game screens
   — No in-game Rules/Scoring UI (that stays on Welcome only)
*/

/* ---------------------------------------
   Fonts & base variables
--------------------------------------- */
@import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap');

:root{
  /* Fallbacks if theme vars aren't set yet */
  --primary: #E30613;
  --accent: #3498db;
  --correct: #00A651;
  --incorrect: #E30613;
  --background: #F5F5F5;
  --card-background: #FFFFFF;
  --text-color: #333333;

  /* Derived */
  --text-secondary: #666;
  --warning: #FF8C00;

  --radius: 14px;
  --radius-lg: 18px;

  --shadow-1: 0 2px 8px rgba(0,0,0,.08);
  --shadow-2: 0 6px 24px rgba(0,0,0,.12);

  --tr: .22s cubic-bezier(.4,0,.2,1);
}

*{ box-sizing: border-box; }
html, body{ height:100%; }
body{
  margin:0;
  font-family: 'Open Sans', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color: var(--text-color);
  background: linear-gradient(135deg, var(--background) 0%, #e9ecef 100%);
  line-height: 1.55;
}

/* Generic buttons */
button{
  -webkit-tap-highlight-color: transparent;
  appearance: none; border: 0; cursor: pointer;
  border-radius: 999px; padding: 12px 22px; min-width: 120px;
  font-weight: 700; letter-spacing: .02em; text-transform: uppercase;
  color:#fff; background: linear-gradient(135deg, var(--primary), color-mix(in srgb, var(--primary) 82%, #000));
  box-shadow: var(--shadow-1);
  transition: transform var(--tr), box-shadow var(--tr), background var(--tr), opacity var(--tr);
}
button:hover{ transform: translateY(-1px); box-shadow: var(--shadow-2); }
button:active{ transform: translateY(0); }
button:disabled{ opacity:.55; cursor:not-allowed; box-shadow:none; }

/* Secondary brand button (Pass) */
.btn-pass{
  background: linear-gradient(135deg, var(--warning), #e67300);
}

/* replace your current .hint-icon + :hover with this */
.hint-icon{
  flex:0 0 auto;
  width:36px; height:36px; padding:0; min-width:auto;
  display:inline-flex; align-items:center; justify-content:center; cursor:pointer;

  background:#fff;
  color: var(--correct);                                    /* ✅ green */
  border-radius:10px;
  border:1px solid color-mix(in srgb, var(--correct) 35%, #e6e6e6);
  box-shadow: 0 2px 8px rgba(0,0,0,.08);
}
.hint-icon:hover{
  background: color-mix(in srgb, var(--correct) 10%, #fff); /* subtle green tint on hover */
}
.hint-icon svg{ color: currentColor; }                      /* make the bulb stroke inherit */

/* Text helpers */
.small{ font-size:.85rem; color:var(--text-secondary); }

.hint-inline{
  background: linear-gradient(135deg, var(--correct), color-mix(in srgb, var(--correct) 78%, #000));
  color:#fff;
  border:0;
}

/* ---------------------------------------
   Loading (the FOUC guard lives in index.html)
--------------------------------------- */
.loading-screen{
  position:fixed; inset:0;
  display:flex; align-items:center; justify-content:center;
  background: linear-gradient(135deg, var(--background), #e8e8e8);
  z-index:10000;
}
.loading-content{ text-align:center; color: var(--primary); }
.spinner{
  width:50px;height:50px;border:4px solid rgba(227,6,19,.25);
  border-top:4px solid var(--primary); border-radius:50%;
  animation: spin 1s linear infinite; margin:0 auto 16px;
}
@keyframes spin{ to{ transform: rotate(360deg);} }

/* ---------------------------------------
   Welcome Screen (home)
--------------------------------------- */
.welcome-screen{
  min-height:100vh; display:flex; align-items:center; justify-content:center;
  padding: 40px 16px;
}
.welcome-container{
  width:100%; max-width: 920px; background: var(--card-background);
  border-radius: 22px; box-shadow: var(--shadow-2); overflow:hidden;
}
.welcome-header{
  padding: 36px 26px; color:#fff;
  background: linear-gradient(135deg, var(--primary), color-mix(in srgb, var(--primary) 80%, #000));
  position:relative;
}
.welcome-logo{ max-width:200px; margin:0 auto 16px; }
.welcome-title{ margin:0 0 6px; text-align:center; font-size:2rem; font-weight:800; letter-spacing:.01em; }
.welcome-subtitle{ margin:0; text-align:center; opacity:.9; }

.welcome-content{ padding: 26px; }

.game-rules{ max-width: 760px; margin: 0 auto; }
.game-rules h3{ margin:0 0 14px; color: var(--primary); font-size:1.3rem; }
.rules-grid{
  display:grid; gap:18px; grid-template-columns: repeat(auto-fit,minmax(260px,1fr));
  margin-bottom:22px;
}
.rule-item{
  background: linear-gradient(135deg, #fafafa, #f1f1f1);
  border-left: 4px solid var(--primary);
  border-radius: 12px; padding:16px; box-shadow: var(--shadow-1);
}
.rule-item h4{ margin:0 0 8px; color: var(--primary); font-weight:700; }
.rule-item p{ margin:0; color: var(--text-secondary); }

.scoring-table{
  border:1px solid #eee; border-radius: 12px; padding: 16px; background: #fff;
  box-shadow: var(--shadow-1); max-width: 760px; margin: 16px auto 0;
}
.scoring-table h4{ margin:0 0 10px; color:var(--primary); }
.scoring-row{ display:flex; justify-content:space-between; padding:8px 0; border-bottom:1px solid #f2f2f2; }
.scoring-row:last-child{ border-bottom:0; font-weight:700; color: var(--primary); }

.action-buttons{
  display:flex; gap:14px; justify-content:center; flex-wrap:wrap; margin-top:20px;
}

/* ---------------------------------------
   Game Container
--------------------------------------- */
.game-container{
  width:100%; max-width: 1000px; margin: 18px auto; padding: 16px;
  background: var(--card-background); border-radius: 22px; box-shadow: var(--shadow-2);
}

/* Compact header */
.compact-header{ border-radius: 16px; overflow:hidden; box-shadow: var(--shadow-2); margin-bottom: 16px; }
.header-top{
  display:flex; align-items:center; justify-content:space-between;
  background:#2c3e50; color:#fff; padding:10px 14px;
}
.compact-header h1{ margin:0; font-size:1.1rem; font-weight:800; letter-spacing:.02em; }
.back-home{
  display:inline-flex; align-items:center; justify-content:center;
  width:34px; height:34px; border-radius:50%; min-width:auto;
  background: rgba(255,255,255,.14); color:#fff;
}
.back-home:hover{ background: rgba(255,255,255,.22); }

/* One-row scoreboard (5 columns) */
.header-stats{
  display:grid; grid-template-columns: repeat(5, minmax(0,1fr)); gap:6px;
  background:#f6f7f8; padding:10px 12px; border-bottom:1px solid #e7e7e7;
}
.stat.mini{
  background:#fff; border:1px solid #eaeaea; border-radius:10px;
  padding:8px 10px; text-align:center;
}
.stat.mini span{ display:block; font-size:.68rem; color:#667; letter-spacing:.06em; }
.stat.mini strong{ font-size:1.08rem; color:#102030; }

/* Timer pill (accent by default, red only last minute) */
#timer.timer-mini{
  display:flex; align-items:center; justify-content:center;
  background: linear-gradient(135deg, var(--accent), color-mix(in srgb, var(--accent) 80%, #000));
  color:#fff; font-weight:900; border-radius:10px; border:3px solid rgba(255,255,255,.25);
}
#timer.timer-mini.timer-urgent{
  background: linear-gradient(135deg, #FF4444, #CC0000) !important;
  animation: pulse-urgent 1s infinite;
}
@keyframes pulse-urgent{
  0%,100%{ transform:none; box-shadow: 0 4px 16px rgba(0,0,0,.12); }
  50%{ transform: scale(1.03); box-shadow: 0 10px 28px rgba(255,0,0,.36); }
}

/* Hide stats (except timer) in preview mode */
.preview-mode .header-stats .stat.mini{ display:none; }
.preview-mode .header-stats #timer{ grid-column: 1 / -1; }

/* Rosco (Letter Circle) */
.rosco-container{
  position:relative; width: 440px; height: 440px; margin: 14px auto;
}
.rosco{ position:relative; width:100%; height:100%; }

.current-letter{
  position:absolute; inset:0; display:flex; align-items:center; justify-content:center;
  font-size:84px; font-weight:900; color: var(--primary); opacity:.06; z-index:0;
}
.center-image{
    position:absolute; left:50%; top:50%; transform: translate(-50%,-50%);
    width:140px; height:140px;
    background: transparent;
    border: 0;
    box-shadow: none;
    border-radius: 0;
    display:flex; align-items:center; justify-content:center;
    z-index:1;
  }

  #centerLogo{ max-width: 92%; max-height: 92%; }

.letter{
  position:absolute; width:56px; height:56px; border-radius:50%;
  background: linear-gradient(135deg, #fff, #f7f7f7);
  border:2px solid #e4e4e4; color: var(--primary); font-weight:800; font-size:18px;
  display:flex; align-items:center; justify-content:center; cursor: default;
  box-shadow: var(--shadow-1); transition: transform var(--tr), box-shadow var(--tr), background var(--tr), color var(--tr), border-color var(--tr);
}
.letter.correct{
  background: linear-gradient(135deg, var(--correct), color-mix(in srgb, var(--correct) 80%, #000));
  color:#fff; border-color: var(--correct); transform: scale(1.12);
  box-shadow: 0 0 18px color-mix(in srgb, var(--correct) 35%, transparent);
}
.letter.incorrect{
  background: linear-gradient(135deg, var(--incorrect), color-mix(in srgb, var(--incorrect) 82%, #000));
  color:#fff; border-color: var(--incorrect); transform: scale(.96);
  box-shadow: 0 0 18px color-mix(in srgb, var(--incorrect) 35%, transparent);
}
.letter.passed{
  background: linear-gradient(135deg, var(--warning), #e67300);
  color:#fff; border-color: #e07a00;
  box-shadow: 0 0 16px rgba(255,140,0,.28);
}
.letter.current{
  background: linear-gradient(135deg, var(--accent), color-mix(in srgb, var(--accent) 80%, #000));
  color:#fff; border-color: rgba(255,255,255,.85);
  transform: scale(1.22); animation: glow-current 1.8s infinite;
}
@keyframes glow-current{
  0%,100%{ box-shadow: 0 0 22px color-mix(in srgb, var(--accent) 60%, transparent); }
  50%{ box-shadow: 0 0 32px color-mix(in srgb, var(--accent) 85%, transparent); }
}
.letter.unanswered{
  background: linear-gradient(135deg, #f6f6f6, #eee);
  color: var(--text-secondary); border-color:#e2e2e2; filter: grayscale(35%); opacity:.85;
}

/* Question block */
.game-info{
  position:relative; background: linear-gradient(135deg, #fafafa, #f1f1f1);
  border:1px solid #e7e7e7; border-radius: 14px; padding: 16px;
  box-shadow: inset 0 2px 8px rgba(0,0,0,.04);
}
#definition{ margin:0; font-size: 1.05rem; font-weight:600; color: var(--text-color); }
.preview-mode #definition{ color: var(--text-secondary); font-style: italic; }

.question-row{ display:flex; align-items:flex-start; gap:10px; }
.question-row p{ flex:1; }

.fuzzy-hint{
  margin-top:10px; padding:10px 12px; border-radius: 10px;
  background: linear-gradient(135deg, rgba(255,140,0,.1), rgba(255,140,0,.22));
  color: var(--warning); border-left:4px solid var(--warning);
  box-shadow: var(--shadow-1); font-weight:600;
}

/* Answer input + buttons */
.input-container{ display:flex; justify-content:center; margin: 12px 0; }
input#answer{
  width: 360px; max-width: 100%; text-align:center;
  padding: 14px 18px; font-size: 1.05rem; font-weight:700; letter-spacing:.02em;
  background:#fff; border:2px solid #e2e2e2; border-radius: 999px;
  outline: none; transition: border-color var(--tr), box-shadow var(--tr), transform var(--tr);
  box-shadow: inset 0 2px 8px rgba(0,0,0,.05);
}
input#answer:focus{
  border-color: var(--primary);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--primary) 22%, transparent), inset 0 2px 8px rgba(0,0,0,.05);
  transform: translateY(-1px);
}

.btn-row{ display:flex; gap:12px; margin: 12px 0 4px; }
.btn-row button{ flex:1; min-width:0; }

/* Final score + results */
#finalScore{
  margin: 18px 0; padding: 18px; border-radius: 14px;
  background: linear-gradient(135deg, #fafafa, #f1f1f1);
  border-left: 4px solid var(--primary); box-shadow: var(--shadow-1);
}
.points-breakdown{
  margin-top:12px; padding: 14px; border-radius: 12px;
  background: linear-gradient(135deg, rgba(227,6,19,.06), rgba(227,6,19,.12));
  border:1px solid rgba(227,6,19,.18);
}
.points-breakdown h3{ margin:0 0 8px; color: var(--primary); text-align:center; }
.total-points{
  margin-top:10px; text-align:center; font-size:1.3rem; font-weight:800; color: var(--primary);
  border:2px solid var(--primary); border-radius: 12px; padding:10px; background:#fff;
}

#results{ margin-top:16px; }
.results-container{
  background:#fff; border:1px solid #eee; border-radius: 16px; padding: 22px; box-shadow: var(--shadow-2);
}
.results-header{ text-align:center; padding-bottom:14px; border-bottom:2px solid #eee; }
.results-header h2{ margin:0; color: var(--primary); }
.results-summary{
  display:grid; gap:14px; grid-template-columns: repeat(auto-fit,minmax(140px,1fr));
  background: linear-gradient(135deg, #fafafa, #f1f1f1);
  border:1px solid #eee; border-radius: 12px; padding: 14px; margin: 16px 0;
}
.summary-item{ background:#fff; border:1px solid #eee; border-radius: 10px; padding:12px; text-align:center; }
.summary-label{ font-size:.82rem; color:var(--text-secondary); }
.summary-value{ font-size:1.6rem; font-weight:800; }
.summary-value.correct{ color: var(--correct); }
.summary-value.incorrect{ color: var(--incorrect); }
.summary-value.neutral{ color: var(--primary); }

/* Countdown overlay (3-2-1) */
#countdownOverlay{
  position: fixed; inset: 0;
  background: rgba(0,0,0,.55); display:none;
  align-items:center; justify-content:center; z-index: 100000; backdrop-filter: blur(2px);
}
#countdownOverlay.show{ display:flex; }
#countdownNumber{
  font: 900 120px/1 'Open Sans', sans-serif;
  color:#fff; text-shadow: 0 10px 40px rgba(0,0,0,.35);
  animation: pop 1s ease-out infinite;
}
@keyframes pop{ 0%{ transform: scale(.6); opacity:.2; } 50%{ transform: scale(1.1); opacity:1; } 100%{ transform: scale(1); opacity:.85; } }

/* ---------------------------------------
   Responsive
--------------------------------------- */
@media (max-width: 768px){
  .welcome-container, .game-container{ margin: 10px; padding: 10px; }

  .rosco-container{ width: 320px; height: 320px; }
  .letter{ width:44px; height:44px; font-size:16px; }
  .center-image{ width: 96px; height: 96px; }
  .current-letter{ font-size: 64px; }

  .header-stats{ gap:5px; padding:8px; }
  .stat.mini{ padding:6px 8px; }
  .stat.mini strong{ font-size:1rem; }
}

@media (max-width: 480px){
  .compact-header{ border-radius: 12px; }
  .header-top{ padding: 8px 10px; }
  .compact-header h1{ font-size: .98rem; }

  .header-stats{ gap:4px; padding: 8px; }
  .stat.mini{ padding:6px; border-radius:8px; }
  .stat.mini span{ font-size:.62rem; }
  .stat.mini strong{ font-size:.98rem; }
  #timer.timer-mini{ font-size: .98rem; border-width: 2px; }

  .rosco-container{ width: 280px; height: 280px; margin: 10px auto; }
  .letter{ width:36px; height:36px; font-size:14px; }
  .center-image{ width: 78px; height: 78px; }
  .current-letter{ font-size: 52px; }

  .game-info{ padding: 12px; }
  .hint-icon{ width:32px; height:32px; border-radius:8px; }

  .input-container{ margin: 10px 0; }
  .btn-row{ gap:10px; }
}

/* Print (results only) */
@media print{
  body *{ visibility: hidden; }
  #results, #results *{ visibility: visible; }
  #results{ position:absolute; inset:0; width:100%; background:none; box-shadow:none; }
}

/* Buttons with leading icons */
.with-ico{
    display:inline-flex; align-items:center; justify-content:center; gap:10px;
  }
  .with-ico svg{
    width:18px; height:18px; flex:0 0 auto; color:#fff; opacity:.95;
  }


/* Sticky action bar (mobile-first) */
.actionbar{
  /* desktop default = normal flow */
}

@media (max-width: 768px){
  .game-container{
    /* leave room so content isn't hidden behind the bar */
    padding-bottom: 120px; /* updated dynamically too */
  }

  .actionbar{
    position: fixed;
    left: 0; right: 0; bottom: 0;
    z-index: 1000;
    background: var(--card-background);
    border-top: 1px solid #e7e7e7;
    box-shadow: 0 -8px 24px rgba(0,0,0,.12);
    padding: 12px 16px;    
  }

  .actionbar .input-container,
.actionbar .btn-row{
  max-width: 760px;                   /* tweak to taste */
  margin-left: auto;
  margin-right: auto;
}

  .actionbar .input-container{ margin: 0 0 10px; }
  .actionbar .btn-row{ margin: 0; gap: 10px; }
}

/* Buttons with icons (you already added earlier) */
.with-ico{ display:inline-flex; align-items:center; justify-content:center; gap:10px; }
.with-ico svg{ width:18px; height:18px; flex:0 0 auto; color:#fff; opacity:.95; }